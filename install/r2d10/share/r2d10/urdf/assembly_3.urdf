<?xml version="1.0"?>
<robot name="assembly_3" xmlns:xacro="http://www.ros.org/wiki/xacro">

<!-- <xacro:include filename="$(find r2d10)/urdf/materials.xacro"/> -->
<!-- <xacro:include filename="$(find-pkg-share r2d10)/urdf/assembly_3.trans"/>
<xacro:include filename="$(find-pkg-share r2d10)/urdf/assembly_3.gazebo"/> -->

<material name="silver"> <!-- colour is silver -->
  <color rgba="0.700 0.700 0.700 1.000"/>
</material>

<material name="black"> <!-- wheels colour black -->
  <color rgba="0 0 0 1"/>
</material>

<!-- physical part base_link -->
<link name="base_link">
  <inertial>   <!-- inertia link -->
    <origin xyz="-6.745525765719935e-05 0.0012816498954868177 0.0354047315459432" rpy="0 0 0"/>  <!-- position & rotation -->
    <mass value="37.821366170820795"/> <!-- mass (kg) -->
    <inertia ixx="0.23125" iyy="0.223709" izz="0.423982" ixy="-0.000124" iyz="0.000747" ixz="-3.9e-05"/>  <!-- inertia matrix -->
  </inertial>
  <visual>
    <origin xyz="0 0 0" rpy="0 0 0"/> <!-- position and rotation -->
    <geometry>
      <mesh filename="package://r2d10/meshes/base_link.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="silver"/> 
  </visual>
  <collision> <!-- physics collision shape -->
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <geometry> <!-- shape of visual collision -->
      <mesh filename="package://r2d10/meshes/base_link.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
</link>

<!-- link: physical part caster_1 -->
<link name="caster_1">
  <inertial>
    <origin xyz="0.0 0.11 -0.0043996518255540636" rpy="0 0 0"/>
    <mass value="0.0707011858312227"/>
    <inertia ixx="6e-06" iyy="6e-06" izz="1e-05" ixy="0.0" iyz="-0.0" ixz="0.0"/>
  </inertial>
  <visual>
    <origin xyz="-0.0 -0.0 -0.0" rpy="0 0 0"/>
    <geometry>
      <mesh filename="package://r2d10/meshes/caster_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin xyz="-0.0 -0.0 -0.0" rpy="0 0 0"/>
    <geometry>
      <mesh filename="package://r2d10/meshes/caster_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
</link>

<link name="left_wheel_1">
  <inertial>
    <origin xyz="-0.012500000000000011 0.0 0.0" rpy="0 0 0"/>
    <mass value="0.6512177959195155"/>
    <inertia ixx="0.000344" iyy="0.000206" izz="0.000206" ixy="0.0" iyz="-0.0" ixz="0.0"/>
  </inertial>
  <visual>
    <origin xyz="0.085 0.0475 -0.02" rpy="0 0 0"/>
    <geometry>
      <mesh filename="package://r2d10/meshes/left_wheel_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="black"/>
  </visual>
  <collision>
    <origin xyz="0.085 0.0475 -0.02" rpy="0 0 0"/>
    <geometry>
      <mesh filename="package://r2d10/meshes/left_wheel_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
</link>

<link name="right_wheel_1">
  <inertial>
    <origin xyz="0.012500000000000108 0.0 -6.938893903907228e-18" rpy="0 0 0"/>
    <mass value="0.6512177959195155"/>
    <inertia ixx="0.000344" iyy="0.000206" izz="0.000206" ixy="0.0" iyz="0.0" ixz="0.0"/>
  </inertial>
  <visual>
    <origin xyz="-0.09 0.0475 -0.02" rpy="0 0 0"/>
    <geometry>
      <mesh filename="package://r2d10/meshes/right_wheel_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="black"/>
  </visual>
  <collision>
    <origin xyz="-0.09 0.0475 -0.02" rpy="0 0 0"/>
    <geometry>
      <mesh filename="package://r2d10/meshes/right_wheel_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
</link>

<link name="ultrasonic_forward_1">
  <inertial>
    <origin xyz="-6.89984745874354e-13 0.005799256348663379 -6.55503359925369e-11" rpy="0 0 0"/>
    <mass value="0.06306919012201337"/>
    <inertia ixx="3e-06" iyy="1.2e-05" izz="1.2e-05" ixy="-0.0" iyz="0.0" ixz="-0.0"/>
  </inertial>
  <visual>
    <origin xyz="-0.0 -0.15 -0.035" rpy="0 0 0"/>
    <geometry>
      <mesh filename="package://r2d10/meshes/ultrasonic_forward_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin xyz="-0.0 -0.15 -0.035" rpy="0 0 0"/>
    <geometry>
      <mesh filename="package://r2d10/meshes/ultrasonic_forward_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
  <!-- Ultrasonic Forward -->
<gazebo reference="ultrasonic_forward_1">
  <sensor name="ultrasonic_forward" type="gpu_ray">
    <update_rate>10</update_rate>
    <topic>ultrasonic_forward</topic>
    <frame_id>ultrasonic_forward_1</frame_id>
    
    <ray>
      <scan>
        <horizontal>
          <samples>5</samples>
          <resolution>1</resolution>
          <min_angle>-0.12</min_angle>
          <max_angle>0.12</max_angle>
        </horizontal>
        <vertical>
          <samples>5</samples>
          <resolution>1</resolution>
          <min_angle>-0.12</min_angle>
          <max_angle>0.12</max_angle>
        </vertical>
      </scan>
      <range>
        <min>0.02</min>
        <max>4.00</max>
        <resolution>0.01</resolution>
      </range>
    </ray>
  </sensor>
</gazebo>

</link>

<link name="ultrasonic_left_1">
  <inertial>
    <origin xyz="-0.005799256348663379 -6.899762237296075e-13 -6.55503359925369e-11" rpy="0 0 0"/>
    <mass value="0.06306919012201337"/>
    <inertia ixx="1.2e-05" iyy="3e-06" izz="1.2e-05" ixy="0.0" iyz="-0.0" ixz="-0.0"/>
  </inertial>
  <visual>
    <origin xyz="0.15 -0.0 -0.035" rpy="0 0 0"/>
    <geometry>
      <mesh filename="package://r2d10/meshes/ultrasonic_left_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin xyz="0.15 -0.0 -0.035" rpy="0 0 0"/>
    <geometry>
      <mesh filename="package://r2d10/meshes/ultrasonic_left_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision> 
</link> 
<!-- Ultrasonic left -->
<gazebo reference="ultrasonic_left_1">
  <sensor name="ultrasonic_left" type="gpu_ray">
    <update_rate>10</update_rate>
    <topic>ultrasonic_left</topic>
    <frame_id>ultrasonic_left_1</frame_id>
    
    <ray>
      <scan>
        <horizontal>
          <samples>5</samples>
          <resolution>1</resolution>
          <min_angle>-0.12</min_angle>
          <max_angle>0.12</max_angle>
        </horizontal>
        <vertical>
          <samples>5</samples>
          <resolution>1</resolution>
          <min_angle>-0.12</min_angle>
          <max_angle>0.12</max_angle>
        </vertical>
      </scan>
      <range>
        <min>0.02</min>
        <max>4.00</max>
        <resolution>0.01</resolution>
      </range>
    </ray>
  </sensor>
</gazebo>



<link name="ultrasonic_right_1">
  <inertial>
    <origin xyz="0.005799256348663379 6.899932680191004e-13 -6.55503359925369e-11" rpy="0 0 0"/>
    <mass value="0.06306919012201337"/>
    <inertia ixx="1.2e-05" iyy="3e-06" izz="1.2e-05" ixy="0.0" iyz="0.0" ixz="0.0"/>
  </inertial>
  <visual>
    <origin xyz="-0.15 -0.0 -0.035" rpy="0 0 0"/>
    <geometry>
      <mesh filename="package://r2d10/meshes/ultrasonic_right_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin xyz="-0.15 -0.0 -0.035" rpy="0 0 0"/>
    <geometry>
      <mesh filename="package://r2d10/meshes/ultrasonic_right_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
</link>

<!-- Ultrasonic right -->
<gazebo reference="ultrasonic_right_1">
  <sensor name="ultrasonic_right" type="gpu_ray">
    <update_rate>10</update_rate>
    <topic>ultrasonic_right</topic>
    <frame_id>ultrasonic_right_1</frame_id>
    
    <ray>
      <scan>
        <horizontal>
          <samples>5</samples>
          <resolution>1</resolution>
          <min_angle>-0.12</min_angle>
          <max_angle>0.12</max_angle>
        </horizontal>
        <vertical>
          <samples>5</samples>
          <resolution>1</resolution>
          <min_angle>-0.12</min_angle>
          <max_angle>0.12</max_angle>
        </vertical>
      </scan>
      <range>
        <min>0.02</min>
        <max>4.00</max>
        <resolution>0.01</resolution>
      </range>
    </ray>
  </sensor>
</gazebo>



<link name="lidar_1">
  <inertial>
    <origin xyz="7.385233546074017e-18 0.0 0.01999999999999999" rpy="0 0 0"/>
    <mass value="1.2084136142033137"/>
    <inertia ixx="0.000531" iyy="0.000531" izz="0.00074" ixy="0.0" iyz="0.0" ixz="0.0"/>
  </inertial>
  <visual>
    <origin xyz="-0.0 -0.0 -0.07" rpy="0 0 0"/>
    <geometry>
      <mesh filename="package://r2d10/meshes/lidar_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin xyz="-0.0 -0.0 -0.07" rpy="0 0 0"/>
    <geometry>
      <mesh filename="package://r2d10/meshes/lidar_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
</link>

<!-- Gazebo plugin for LIDAR - OUTSIDE the link -->
<gazebo reference="lidar_1">
  <sensor name="lidar_1" type="gpu_lidar">
    <update_rate>20</update_rate>
    <topic>scan</topic>
    <frame_id>lidar_1</frame_id>

    <lidar>
      <scan>
        <horizontal>
          <samples>720</samples>
          <resolution>1</resolution>
          <min_angle>-3.14</min_angle>
          <max_angle>3.14</max_angle>
        </horizontal>
        <vertical>
          <samples>1</samples>
          <min_angle>0</min_angle>
          <max_angle>0</max_angle>
        </vertical>
      </scan>
      <range>
        <min>0.12</min>
        <max>8.0</max>
        <resolution>0.01</resolution>
      </range>
    </lidar>
  </sensor>
</gazebo>

<!-- joint part connectors such as type and name -->
<joint name="Rigid 1" type="fixed">
  <origin xyz="0.0 0.0 0.0" rpy="0 0 0"/>
  <parent link="base_link"/>
  <child link="caster_1"/>
</joint>

<joint name="Revolute 2" type="continuous">
  <origin xyz="-0.085 -0.0475 0.02" rpy="0 0 0"/>
  <parent link="base_link"/>
  <child link="left_wheel_1"/>
  <axis xyz="-1.0 0.0 0.0"/>
</joint>

<joint name="Revolute 3" type="continuous">
  <origin xyz="0.09 -0.0475 0.02" rpy="0 0 0"/>
  <parent link="base_link"/>
  <child link="right_wheel_1"/>
  <axis xyz="1.0 0.0 0.0"/>
</joint>

<joint name="Rigid 5" type="fixed">
  <origin xyz="0.0 0.15 0.035" rpy="0 0 0"/>
  <parent link="base_link"/>
  <child link="ultrasonic_forward_1"/>
</joint>

<joint name="Rigid 6" type="fixed">
  <origin xyz="-0.15 0.0 0.035" rpy="0 0 0"/>
  <parent link="base_link"/>
  <child link="ultrasonic_left_1"/>
</joint>

<joint name="Rigid 7" type="fixed">
  <origin xyz="0.15 0.0 0.035" rpy="0 0 0"/>
  <parent link="base_link"/>
  <child link="ultrasonic_right_1"/>
</joint>

<joint name="Rigid 9" type="fixed">
  <origin xyz="0.0 0.0 0.07" rpy="0 0 0"/>
  <parent link="base_link"/>
  <child link="lidar_1"/>
</joint>

</robot>
